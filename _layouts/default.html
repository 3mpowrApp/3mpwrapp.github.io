<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{{ page.title }} | {{ site.title }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="{{ page.description | default: site.description }}">
  {%- include custom-head.html -%}
  {%- seo -%}
  <link rel="stylesheet" href="{{ "/assets/css/style.css" | relative_url }}">
</head>
<body>
  <a class="skip-link" href="#main-content">Skip to content</a>
  <header>
    <nav aria-label="Primary">
      <ul class="nav-list">
        <li><a href="{{ '/' | relative_url }}" aria-current="{% if page.url == '/' %}page{% endif %}">Home</a></li>
        <li><a href="{{ '/about' | relative_url }}" aria-current="{% if page.url == '/about.html' or page.url == '/about/' %}page{% endif %}">About</a></li>
        <li><a href="{{ '/features' | relative_url }}" aria-current="{% if page.url contains '/features' %}page{% endif %}">Features</a></li>
        <li><a href="{{ '/user-guide' | relative_url }}" aria-current="{% if page.url contains '/user-guide' %}page{% endif %}">User Guide</a></li>
        <li><a href="{{ '/contact' | relative_url }}" aria-current="{% if page.url contains '/contact' %}page{% endif %}">Contact</a></li>
        <li><a href="{{ '/blog' | relative_url }}" aria-current="{% if page.url contains '/blog' %}page{% endif %}">Blog</a></li>
        <li><a href="{{ '/newsletter' | relative_url }}" aria-current="{% if page.url contains '/newsletter' %}page{% endif %}">Newsletter</a></li>
        <li><a href="{{ '/beta' | relative_url }}" aria-current="{% if page.url contains '/beta' %}page{% endif %}">Beta Test</a></li>
        <li><a href="{{ '/search' | relative_url }}" aria-current="{% if page.url contains '/search' %}page{% endif %}">Search</a></li>
      </ul>
    </nav>

    <!-- High contrast + Dark mode toggles -->
    <div class="header-controls" role="group" aria-label="Display settings">
      <button
        id="contrast-toggle"
        class="contrast-toggle"
        type="button"
        aria-pressed="false"
        aria-label="Toggle high contrast mode"
      >
        High contrast
      </button>

      <button
        id="theme-toggle"
        class="theme-toggle"
        type="button"
        aria-pressed="false"
        aria-label="Toggle dark mode"
      >
        Dark mode
      </button>
    </div>
  </header>

  <main id="main-content" role="main" tabindex="-1">
    {{ content }}
  </main>

  <footer>
    <div class="social-links">
      <a href="https://www.facebook.com/3mpowrapp" target="_blank" rel="noopener noreferrer">Facebook</a>
      <a href="https://x.com/3mpowrApp0816" target="_blank" rel="noopener noreferrer">X (Twitter)</a>
      <a href="https://www.instagram.com/3mpowrapp/" target="_blank" rel="noopener noreferrer">Instagram</a>
      <a href="{{ '/feed.xml' | relative_url }}" rel="alternate" type="application/rss+xml">RSS</a>
      <a href="https://docs.google.com/forms/d/e/1FAIpQLScY599ZYJtpRakd421ADGZumejk2WjmbVvpUknw2uHAzTNx9A/viewform?usp=header" target="_blank" rel="noopener noreferrer">Beta Testers Sign Up</a>
    </div>
    <p>&copy; {{ site.time | date: '%Y' }} 3mpowr App</p>
  </footer>

  <!-- A11y: skip link should move focus to main -->
  <script>
    (function() {
      var skip = document.querySelector('.skip-link');
      var main = document.getElementById('main-content');
      if (skip && main) {
        skip.addEventListener('click', function() {
          setTimeout(function(){ main.focus(); }, 0);
        });
      }
    })();
  </script>

  <!-- Utilities and controls -->
  <script src="{{ '/assets/js/a11y.js' | relative_url }}" defer></script>
  <script src="{{ '/assets/js/contrast.js' | relative_url }}" defer></script>
  <script src="{{ '/assets/js/theme.js' | relative_url }}" defer></script>
  <script src="{{ '/assets/js/back-to-top.js' | relative_url }}" defer></script>

  <!-- Back to top button -->
  <button
    id="back-to-top"
    class="back-to-top"
    type="button"
    aria-label="Back to top"
    aria-hidden="true"
  >
    â†‘ Back to top
  </button>
</body>
</html>
